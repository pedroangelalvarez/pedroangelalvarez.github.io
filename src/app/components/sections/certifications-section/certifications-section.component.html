<app-section-wrapper sectionId="certifications" className="certifications-bg">
    <!-- Section Header -->
    <div class="section-header">
        <h2 class="section-title">
            <span class="gradient-text">Certificaciones</span>
        </h2>
        <p class="section-subtitle">
            Certificaciones que validan mi experiencia y conocimientos
        </p>
    </div>

    <!-- 3D Carousel Container -->
    <div class="carousel-wrapper">
        <!-- Navigation Arrows -->
        <button class="nav-button nav-prev" (click)="navigate('prev')" aria-label="Anterior">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 19l-7-7 7-7" />
            </svg>
        </button>

        <div class="carousel-container">
            <div class="carousel-scene">
                <div class="carousel-3d" [style.transform]="getCarouselTransform()">
                    <div *ngFor="let cert of certifications; let i = index" class="carousel-card"
                        [class.active]="i === currentIndex" [style.transform]="getCardTransform(i)"
                        (click)="openCertDetail(cert, $event)">

                        <!-- Card Glow Effect -->
                        <div class="card-glow" [style.background]="getCategoryForCert(cert).color"></div>

                        <!-- Card Content -->
                        <div class="card-inner">
                            <!-- Category Badge -->
                            <div class="category-badge" [style.background]="getCategoryForCert(cert).color + '20'"
                                [style.border-color]="getCategoryForCert(cert).color + '40'">
                                <span class="category-icon">{{ getCategoryForCert(cert).icon }}</span>
                                <span class="category-name">{{ getCategoryForCert(cert).name }}</span>
                            </div>

                            <!-- Certificate Icon -->
                            <div class="cert-icon-wrapper">
                                <div class="cert-icon"
                                    [style.background]="'linear-gradient(135deg, ' + getCategoryForCert(cert).color + ', ' + getCategoryForCert(cert).color + '80)'">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M12 15l-2 5l2-1l2 1l-2-5z" />
                                        <circle cx="12" cy="9" r="6" />
                                        <path d="M9 9l1.5 1.5L14 7" />
                                    </svg>
                                </div>
                            </div>

                            <!-- Certificate Name -->
                            <h3 class="cert-name">{{ cert.name }}</h3>

                            <!-- Issuer -->
                            <p class="cert-issuer">{{ cert.issuer }}</p>

                            <!-- Date Badge -->
                            <div class="cert-date">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    class="date-icon">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                                    <line x1="16" y1="2" x2="16" y2="6" />
                                    <line x1="8" y1="2" x2="8" y2="6" />
                                    <line x1="3" y1="10" x2="21" y2="10" />
                                </svg>
                                {{ cert.date }}
                            </div>

                            <!-- View Details Button -->
                            <div class="view-details">
                                <span>Ver detalles</span>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 12h14M12 5l7 7-7 7" />
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button class="nav-button nav-next" (click)="navigate('next')" aria-label="Siguiente">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 5l7 7-7 7" />
            </svg>
        </button>
    </div>

    <!-- Carousel Controls -->
    <div class="carousel-controls">
        <!-- Dots Indicator -->
        <div class="dots-container">
            <button *ngFor="let cert of certifications; let i = index" class="dot" [class.active]="i === currentIndex"
                (click)="goToCard(i)" [attr.aria-label]="'Ir a certificaciÃ³n ' + (i + 1)">
            </button>
        </div>

        <!-- Auto-play Toggle -->
        <button class="autoplay-toggle" (click)="toggleAutoPlay()" [class.paused]="!isAutoPlaying">
            <svg *ngIf="isAutoPlaying" viewBox="0 0 24 24" fill="currentColor">
                <rect x="6" y="4" width="4" height="16" />
                <rect x="14" y="4" width="4" height="16" />
            </svg>
            <svg *ngIf="!isAutoPlaying" viewBox="0 0 24 24" fill="currentColor">
                <polygon points="5,3 19,12 5,21" />
            </svg>
            <span>{{ isAutoPlaying ? 'Pausar' : 'Reproducir' }}</span>
        </button>
    </div>

    <!-- Modal -->
    <div *ngIf="activeCert" class="modal-overlay" (click)="closeModal()">
        <div class="modal-content" (click)="stopPropagation($event)">
            <!-- Modal Header -->
            <div class="modal-header">
                <div class="modal-category" [style.background]="getCategoryForCert(activeCert).color + '20'">
                    <span>{{ getCategoryForCert(activeCert).icon }}</span>
                    <span>{{ getCategoryForCert(activeCert).name }}</span>
                </div>
                <button class="modal-close" (click)="closeModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <div class="modal-icon"
                    [style.background]="'linear-gradient(135deg, ' + getCategoryForCert(activeCert).color + ', ' + getCategoryForCert(activeCert).color + '60)'">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M12 15l-2 5l2-1l2 1l-2-5z" />
                        <circle cx="12" cy="9" r="6" />
                        <path d="M9 9l1.5 1.5L14 7" />
                    </svg>
                </div>

                <h3 class="modal-title">{{ activeCert.name }}</h3>

                <div class="modal-details">
                    <div class="detail-item">
                        <span class="detail-label">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                                <circle cx="12" cy="7" r="4" />
                            </svg>
                            Emisor
                        </span>
                        <span class="detail-value">{{ activeCert.issuer }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                                <line x1="16" y1="2" x2="16" y2="6" />
                                <line x1="8" y1="2" x2="8" y2="6" />
                                <line x1="3" y1="10" x2="21" y2="10" />
                            </svg>
                            Fecha
                        </span>
                        <span class="detail-value">{{ activeCert.date }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                                <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                            </svg>
                            ID Credencial
                        </span>
                        <span class="detail-value credential-id">{{ activeCert.credentialId }}</span>
                    </div>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="modal-footer">
                <button class="modal-button secondary" (click)="closeModal()">
                    Cerrar
                </button>
            </div>
        </div>
    </div>
</app-section-wrapper>